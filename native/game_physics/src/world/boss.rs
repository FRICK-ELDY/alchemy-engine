//! Path: native/game_physics/src/world/boss.rs
//! Summary: ボス状態（BossState）

use crate::entity_params::BossParams;

/// ??????
///
/// I-2: ????????kind_id?? Rust ?????
/// ????? Elixir ? Rule state ?????spawn_boss NIF ??????
/// ????????radius, render_kind, max_hp ???? Rust ????
/// Phase 3-B: AI ????? Elixir ???????Rust ?????????????????
pub struct BossState {
    pub x:           f32,
    pub y:           f32,
    pub hp:          f32,
    pub max_hp:      f32,
    /// Elixir ?? set_boss_velocity NIF ????????????
    pub vx:          f32,
    pub vy:          f32,
    /// Elixir ?? set_boss_invincible NIF ???????????
    pub invincible:  bool,
    /// Elixir ? AI ??????????????Rust ???????????????
    pub phase_timer: f32,
    /// ???????????spawn_boss NIF ? Elixir ?????
    pub render_kind:      u8,
    /// ????????spawn_boss NIF ? Elixir ?????
    pub radius:           f32,
    /// ?????????spawn_boss NIF ? Elixir ?????
    pub damage_per_sec:   f32,
}

impl BossState {
    /// `bp` ??????? `params.get_boss(kind_id).clone()` ?????
    /// ???????????????????????????????????
    pub fn new(x: f32, y: f32, bp: &BossParams) -> Self {
        Self {
            x, y,
            hp:            bp.max_hp,
            max_hp:        bp.max_hp,
            vx:            0.0,
            vy:            0.0,
            invincible:    false,
            phase_timer:   bp.special_interval,
            render_kind:   bp.render_kind,
            radius:        bp.radius,
            damage_per_sec: bp.damage_per_sec,
        }
    }
}
